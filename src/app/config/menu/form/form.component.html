<p-toast></p-toast>
<p-confirmDialog [style]="{width: '50vw'}"></p-confirmDialog>
<div class="surface-ground px-4 py-8 md:px-6 lg:px-8">
  <div class="text-900 font-medium text-xl mb-3">Menu Info</div>
  <div class="surface-card p-4 shadow-2 border-round p-fluid">
      <div class="grid formgrid p-fluid">
        <div class="field mb-4 col-12 md:col-6">
          <label for="sname" class="font-medium text-900">Label</label>
          <input id="sname" type="text" [(ngModel)]="data.label" pInputText>
        </div>
        <div class="field mb-4 col-12 md:col-6">
          <label for="sname" class="font-medium text-900">Icon</label>
          <input id="sname" type="text" [(ngModel)]="data.icon" pInputText>
        </div>
        <div class="field mb-4 col-12 md:col-6">
          <label for="sname" class="font-medium text-900">Link</label>
          <input id="sname" type="text" [(ngModel)]="data.routerLink[0]" pInputText>
        </div>
        <p-table [value]="data.items!" styleClass="p-datatable-striped" [tableStyle]="{'min-width': '50rem'}">
          <ng-template pTemplate="caption">
            <div class="flex align-items-start">
              <button pButton pRipple label="New Menu" icon="pi pi-plus" class="p-button-success mr-2" (click)="editSubMenu()"></button>
          </div>
        </ng-template>
          <ng-template pTemplate="header">
              <tr>
                <th>ID</th>
                <th>Icon</th>
                <th>Label</th>
                <th>Link</th>
                  <th>&nbsp;</th>
              </tr>
          </ng-template>
          <ng-template pTemplate="body" let-item let-i="rowIndex">
              <tr>
                <td>
                  {{ item.id }}
              </td>
              <td [pEditableColumn]="item.icon" pEditableColumnField="remark">
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input pInputText type="text" [(ngModel)]="item.icon" />
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{ item.icon }}
                    </ng-template>
                </p-cellEditor>
            </td>
            <td [pEditableColumn]="item.label" pEditableColumnField="remark">
              <p-cellEditor>
                  <ng-template pTemplate="input">
                      <input pInputText type="text" [(ngModel)]="item.label" />
                  </ng-template>
                  <ng-template pTemplate="output">
                      {{ item.label }}
                  </ng-template>
              </p-cellEditor>
          </td>
          <td [pEditableColumn]="item.routerLink[0]" pEditableColumnField="remark">
            <p-cellEditor>
                <ng-template pTemplate="input">
                    <input pInputText type="text" [(ngModel)]="item.routerLink[0]" />
                </ng-template>
                <ng-template pTemplate="output">
                    {{ item.routerLink[0] }}
                </ng-template>
            </p-cellEditor>
        </td>
                  <td>
                    <button *ngIf="item.id" pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success mr-2" (click)="editSubMenu(item)"></button>
                    <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning" (click)="deleteSubMenu($event,i)"></button>
                </td>
              </tr>
          </ng-template>
      </p-table>
        <div class="surface-border border-top-1 opacity-50 mb-4 col-12"></div>
      </div>
      <div class="flex justify-end">
        <button pButton pRipple label="Back" (click)="cancel()" icon="pi pi-times" class="mr-2 w-auto p-button-warning"></button>
      <button pButton pRipple label="Save" (click)="save()" icon="pi pi-file" class="w-auto"></button>
  </div>
</div>
